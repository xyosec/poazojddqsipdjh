"use strict";(self.webpackChunkdoctolib=self.webpackChunkdoctolib||[]).push([[715],{68707:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(24207),o=n(33353),a=n(18809);const s=e=>(0,a.jsxs)("div",{children:[(0,a.jsx)(i.A,{...e}),(0,a.jsx)(o.A,{})]})},33353:(e,t,n)=>{n.d(t,{A:()=>l,o:()=>r});var i=n(89482),o=n(5018),a=n(30311),s=n(18809);const r={notify:()=>null},l=e=>{const[{message:t,uiStyle:n,show:l},c]=(0,i.useState)({}),u=(0,i.useRef)(null),m=(0,i.useRef)(null),{consumeFlashMessage:d}=(0,a.A)(),_=(0,i.useCallback)((e=>{let{message:t,uiStyle:n="success"}=e;t&&(clearTimeout(u.current),clearTimeout(m.current),c({message:t,uiStyle:n,show:!1}),u.current=setTimeout((()=>c((e=>({...e,show:!0})))),200),m.current=setTimeout((()=>c((e=>({...e,show:!1})))),5e3))}),[]);return r.notify=_,(0,i.useEffect)((()=>{const e=d();e&&_({message:e.output,uiStyle:"error"===e.state?"danger":"success",show:!0})}),[]),(0,i.useEffect)((()=>()=>{clearTimeout(u.current),clearTimeout(m.current),r.notify=()=>null}),[]),l&&(0,s.jsx)(o.F,{uiStyle:n,label:t,variant:"banner",size:"small",...e})}},85511:(e,t,n)=>{n.d(t,{Ay:()=>h,SE:()=>p,st:()=>_,uN:()=>m});var i=n(84583),o=n.n(i),a=n(89482),s=n(21930),r=n(30079),l=n(15672),c=n(63388),u=n(18809);const m="frc-captcha-solution",d={FOCUS:"focus",AUTO:"auto",NONE:"none"},_=e=>{let{nonce:t,onIAmHuman:n,onError:i,className:l,startMode:m=d.AUTO}=e;const _=(0,a.useRef)(),p=(0,a.useRef)(),[h,b]=(0,a.useState)(t),f=(0,a.useCallback)((()=>{(0,r.KU)()&&m===d.AUTO&&setTimeout((()=>n("STUBBED-CAPTCHA-SOLUTION")),300)}),[m,n]);return(0,a.useEffect)((()=>{if(!p.current&&_.current){const e={startMode:m,puzzleEndpoint:c.Ay.FRIENDLY_CAPTCHA_PUZZLE_ENDPOINT,doneCallback:n,errorCallback:i,language:(0,r.JK)(),skipStyleInjection:!0};p.current=new s.S(_.current,e),f()}return()=>{p.current&&(n(null),p.current.destroy())}}),[_]),(0,a.useEffect)((()=>{var e;t>h&&(b(t),n(null),null===(e=p.current)||void 0===e||e.reset(),f())}),[h,t,p]),(0,u.jsx)("div",{ref:_,className:o()("frc-captcha","dl-margin-t-16",l),"data-sitekey":c.Ay.FRIENDLY_CAPTCHA_SITE_KEY})},p=e=>{let{field:t=m,...n}=e;return(0,u.jsx)(l.D0,{field:t,children:e=>(0,u.jsx)(_,{onIAmHuman:e.setValue,...n})})},h=_},40233:(e,t,n)=>{n.d(t,{y:()=>s});var i=n(49346),o=n(2875);const a={identification:{title:i.A.t("appointments.edit.step_titles.identification"),index:0},verification:{title:i.A.t("appointments.edit.step_titles.verification"),index:1},patient_infos:{title:i.A.t("appointments.edit.step_titles.patient_infos"),index:2},confirmation:{title:i.A.t("appointments.edit.step_titles.confirmation"),index:3}};i.A.t("appointments.edit.step_titles.identification"),i.A.t("appointments.edit.step_titles.verification"),i.A.t("appointments.edit.step_titles.patient_infos"),i.A.t("appointments.edit.step_titles.appointment_request_details"),i.A.t("appointments.edit.step_titles.confirmation");function s(e){const{title:t,index:n}=a[e];return{title:t,config:{current:n,total:(0,o.A)(a)}}}},7303:(e,t,n)=>{n.d(t,{A:()=>x});var i=n(19365),o=n(38605),a=n(70093),s=n(17439),r=n(31591),l=n(39358),c=n(68707),u=n(49346),m=n(47247),d=n(27658),_=n.n(d),p=n(83611),h=n(18809);const b=e=>{let{date:t}=e;const n=new Date(t),i=_()(n).diff(_()(),"day")<365?"NoYear":"FullAbbrYear";return(0,h.jsxs)("div",{className:"flex gap-x-[4px]",children:[(0,h.jsx)(a.E,{component:"p",uiStyle:"title-s-bold",color:"white",ellipsis:!0,children:(0,h.jsx)(r.X,{date:n,format:i,outputTimezone:m.Bz.FR})}),(0,h.jsx)(a.E,{uiStyle:"title-s-bold",component:"span","aria-hidden":!0,color:"white",children:"\u2022"}),(0,h.jsx)(a.E,{component:"p",uiStyle:"title-s-bold",color:"white",ellipsis:!0,children:(0,h.jsx)(l.i,{date:n,outputTimezone:m.Bz.FR})})]})},f=e=>{let{appointmentPrice:t,appointmentStartDate:n,subtitle:i}=e;return n?(0,h.jsxs)("div",{className:"flex justify-between w-full min-w-0",children:[(0,h.jsxs)("div",{className:"flex flex-col justify-center overflow-hidden","aria-live":"polite",children:[(0,h.jsx)(b,{date:n}),(0,h.jsx)(a.E,{component:"p",uiStyle:"body-xs-regular",color:"white",children:i})]}),t&&(0,h.jsx)("div",{className:"flex shrink-0 pl-[10px] pr-[12px] h-[50px]",children:(0,h.jsx)(s.a,{label:t,size:"xsmall",color:"primary-020"})})]}):null},x=e=>{let{onBack:t,cloudinaryPublicId:n,appointmentStartDate:a,appointmentPrice:s,subtitle:r=u.A.t("appointments.edit.pre_booked_slot_subtitle")}=e;return(0,h.jsx)(c.A,{onBack:t,className:"dl-nav-bar-large",children:(0,h.jsxs)("div",{className:"flex dl-full-height dl-account-new-navbar-content",children:[(0,h.jsx)(i.eu,{className:"dl-z-1",size:"medium",src:n&&(0,p.A)(n,"w_62,h_62,c_fill,g_face")}),(0,h.jsx)(o.I,{name:"solid/lock",color:"success-110",backgroundColor:"white",backgroundClassName:"dl-z-2",size:"xxsmall"}),(0,h.jsx)(f,{appointmentPrice:s,appointmentStartDate:a,subtitle:r})]})})}},4882:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(89482),o=n(49346),a=n(52651),s=n(70093),r=n(36411),l=n(87973),c=n(18809);const u=e=>{var t;let{formApi:n,state:u,hideHint:m=!1}=e;const d=Boolean(null===n||void 0===n||null===(t=n.errors)||void 0===t?void 0:t.phone_number),[_,p]=(0,i.useState)(!1),[h,b]=(0,i.useState)(!1),f=(0,i.useRef)();return(0,i.useEffect)((()=>{p(d&&h)}),[d,h]),(0,i.useEffect)((()=>{null!==u&&void 0!==u&&u.showModal||setTimeout((()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.element.focus()}),500)}),[null===u||void 0===u?void 0:u.showModal]),(0,c.jsxs)("div",{children:[(0,c.jsx)(l.A,{name:"phone"}),(0,c.jsx)(r.o,{level:"h1",uiStyle:"title-l-bold",customStyle:["!mt-16"],children:o.A.t("patient_mobile.root.account.new.phone_number_step.input_label")}),(0,c.jsx)(a.A,{className:"!mt-16 !mb-0",ref:f,id:"phone_number",field:"phone_number",label:"",type:"tel",autoComplete:"tel",placeholder:o.A.t("patient_mobile.root.account.new.phone_number_step.input_placeholder"),required:!0,onBlur:()=>b(!0),hint:(0,c.jsxs)(c.Fragment,{children:[!m&&(0,c.jsx)(s.E,{component:"div",uiStyle:"body-xs-regular",color:"neutral-090",className:"!mt-8",children:o.A.t("patient_mobile.root.account.new.phone_number_step.hint")}),_&&(0,c.jsx)(s.E,{component:"div",uiStyle:"body-xs-regular",color:"error-090",className:"!mt-8",children:o.A.t("patient_mobile.root.account.new.phone_number_step.format_error")})]})})]})}},87973:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(38605),o=n(70093),a=n(18809);const s=e=>{let{name:t,label:n}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-16",children:[(0,a.jsx)("div",{className:"dl-authentication-step-icon-container rounded-lg items-center justify-center flex",children:(0,a.jsx)(i.I,{name:t,size:"xsmall",color:"primary-110"})}),n&&(0,a.jsx)(o.E,{component:"div",uiStyle:"body-s-regular",color:"neutral-090",children:n})]})}},62309:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(49346),o=n(34294),a=n(52725),s=n(18809);const r=e=>{let{loading:t=!1,buttonText:n,currentStep:r,disabled:l,hideProgress:c=!1,onNextTap:u,totalStep:m}=e;const d=!c&&r>0&&m>0;return(0,s.jsxs)("div",{className:"flex flex-col items-stretch mt-24",children:[d&&(0,s.jsx)(a.z,{label:"",hideLabel:!0,className:"mb-16",currentStep:r,totalStep:m}),(0,s.jsx)(o.$,{onClick:u,disabled:l,type:"submit",loadable:{loading:t},children:n||i.A.t("common.actions.continue")})]})}},41591:(e,t,n)=>{n.d(t,{A:()=>g});var i=n(49346),o=n(72371),a=n(14688),s=n(38898),r=n(34294),l=n(27044),c=n(69447),u=n(76606),m=n(57761),d=n(84583),_=n.n(d),p=n(89482),h=n(30079),b=n(17881),f=n(18809);const x={title:{signIn:{email:"patient_mobile.root.account.new.username_used_modal.sign_in.email.title",phone:"patient_mobile.root.account.new.username_used_modal.sign_in.phone.title"},signUp:{email:"patient_mobile.root.account.new.username_used_modal.sign_up.email.title",phone:"patient_mobile.root.account.new.username_used_modal.sign_up.phone.title"}},bodyHtml:{signIn:{email:"patient_mobile.root.account.new.username_used_modal.sign_in.email.body_html",phone:"patient_mobile.root.account.new.username_used_modal.sign_in.phone.body_html"},signUp:{email:"patient_mobile.root.account.new.username_used_modal.sign_up.email.body_html",phone:"patient_mobile.root.account.new.username_used_modal.sign_up.phone.body_html"}},ctaLogin:{signIn:{email:"patient_mobile.root.account.new.username_used_modal.sign_in.email.cta_login",phone:"patient_mobile.root.account.new.username_used_modal.sign_in.phone.cta_login"},signUp:{email:"patient_mobile.root.account.new.username_used_modal.sign_up.email.cta_login",phone:"patient_mobile.root.account.new.username_used_modal.sign_up.phone.cta_login"}},ctaChange:{email:"patient_mobile.root.account.new.username_used_modal.email.cta_change",phone:"patient_mobile.root.account.new.username_used_modal.phone.cta_change"}},y={VIEW:{unknown_username:m.FB,username_already_exists:m.HU},CLOSE_MODAL:{unknown_username:m.DS,username_already_exists:m.RP},PRIMARY_ACTION_SUBMIT:{unknown_username:m.No,username_already_exists:m.wK}},g=e=>{let{onModalSubmit:t,usernameType:n="email",isModalVisible:m,onModalDismiss:d,username:g,reason:v}=e;const A=(e=>"unknown_username"===e?"signIn":"signUp")(v),j=()=>{const e="patient_modify_username_due_to_".concat(v);(0,c.Ay)({name:e,details:{kind:n}},{schema:"patient"}),v&&(0,u.cP)(y.CLOSE_MODAL[v]),null===d||void 0===d||d()};(0,p.useEffect)((()=>{m&&((0,c.Ay)({name:"patient_show_modal_".concat(v),details:{kind:n}},{schema:"patient"}),v&&(0,u.cP)(y.VIEW[v]))}),[m,v,n]);const w=(0,h.kT)();return(0,f.jsxs)(o.A,{size:"medium",show:m,disableDrawerOnMobile:!0,onHide:j,withCloseIcon:!1,title:i.A.t(x.title[A][n]),children:[(0,f.jsx)(a.c,{disableDrawerOnMobile:!0,className:"text-center",children:(0,f.jsx)(b.f,{children:i.A.t(x.bodyHtml[A][n],{username:g})})}),(0,f.jsxs)(s.j,{className:_()("flex",{"flex-row-reverse !justify-start":w}),children:[(0,f.jsx)(l.K,{onClick:()=>{v&&(0,u.cP)(y.PRIMARY_ACTION_SUBMIT[v]),t()},DEPRECATED_trackingId:"patient_change_flow_due_to_".concat(v),DEPRECATED_trackingDetails:{kind:n},children:i.A.t(x.ctaLogin[A][n])}),(0,f.jsx)(r.$,{className:w?"!mr-16":"!mt-16",uiStyle:"secondary",onClick:j,children:i.A.t(x.ctaChange[n])})]})]})}},11501:(e,t,n)=>{n.d(t,{C7:()=>f,Dx:()=>_,K6:()=>b,OO:()=>l,Q2:()=>c,WL:()=>h,kb:()=>m,nt:()=>d,xv:()=>u});var i=n(89482),o=n(94820),a=n(65072),s=n(44201),r=n(33858);let l=function(e){return e.APPOINTMENT="appointment",e.DOCUMENT="document",e.PATIENT_REQUEST="patient_request",e}({}),c=function(e){return e.CP2U="CP2U",e.CR2U="CR2U",e}({}),u=function(e){return e.PHONE="phone",e.EMAIL="email",e.IDENTITY="identity",e}({}),m=function(e){return e.V1="v1",e.V2="v2",e}({});const d=e=>s.A.get("anonymous_".concat(e,"_tracking")),_=()=>s.A.get("current_anonymous_resource_type"),p=e=>["anonymous","resource",e,"patient_eligible"],h=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{isLoading:s,isError:l,data:u,refetch:d,error:_}=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const s=(0,i.useContext)(o.Pl);return(0,a.useQuery)({queryKey:p(e),queryFn:()=>s.get("/anonymous/resource/".concat(e,".json")).then((e=>e.bodyData)).then((e=>{return{accountEmail:(t=e).account_email,eligible:t.eligible,phoneNumber:t.phone_number,email:t.email,firstName:t.first_name,phoneMismatch:t.phone_mismatch,emailMismatch:t.email_mismatch,identityMismatch:t.identity_mismatch,requireBirthdateVerification:t.require_birthdate_verification,doctorNameWithTitle:t.doctor_name_with_title,creatorFirstName:t.creator_first_name,creatorLastName:t.creator_last_name,creatorEmail:t.creator_email,userConversionKind:t.user_conversion_kind,resourceId:t.resource_id,resourceIds:t.resource_ids,resourceType:t.resource_type};var t})),enabled:t&&Boolean(e),staleTime:3e5,onError:n})}(e,t,n);let h;return(null===u||void 0===u?void 0:u.userConversionKind)===c.CP2U&&(h=null!==u&&void 0!==u&&u.email||!(0,r.G7)("birthdate_check_during_cp2u")?m.V1:m.V2),{...u||{},createdByRelative:(null===u||void 0===u?void 0:u.userConversionKind)===c.CR2U,cp2uVersion:h,refetch:d,isLoading:s,isError:l,error:_}},b=e=>{const t=(0,i.useContext)(o.Pl);return(0,a.useMutation)({mutationFn:()=>t.post("/anonymous/resource/".concat(e,"/attach_medical_data.json"))})},f=(e,t,n)=>{const s=(0,i.useContext)(o.Pl);return(0,a.useMutation)({mutationFn:async t=>{let{birthdate:n}=t;return s.post("/anonymous/resource/".concat(e,"/verify_patient_data.json"),{body:{birthdate:n}})},onSuccess:t,onError:n})}}}]);
//# sourceMappingURL=../715-2e4450abd7abf4790c16.js.map