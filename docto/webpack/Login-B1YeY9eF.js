import{j as e,u as w,c as p}from"./vendor-C9O-K7jM.js";import{H as C,I as D,C as H,c as v,e as K}from"./InputPassword-DX7zsMgN.js";import{g as G}from"./index-DgoSVJCJ.js";import{I as J,P as E,B,T as Q}from"./Template-dOubvlnT.js";/* empty css             */const V=({name:t})=>e.jsx("div",{className:"bg-[var(--oxygen-color-primitive-blue-blue-100)] w-[32px] h-[32px] rounded-[8px] flex items-center justify-center",children:e.jsx(J,{name:t,size:"small",color:"primary-110"})}),N=({password:t,isPasswordWrongError:o,isPasswordRequiredError:n,isKeycloakError:a,message:s,onPasswordChange:l,inputPasswordRef:c,prefilledUsername:d})=>{const{t:r}=w();return e.jsxs("div",{className:"flex flex-col-reverse w-full mt-[16px]",children:[e.jsx("input",{id:"username",className:"hidden",name:"username",value:d,disabled:!0,autoComplete:"username"}),e.jsx("input",{id:"password",className:"hidden",name:"password",type:"password"}),e.jsx(D,{ref:c,customStyle:["w-auto"],name:"",autoComplete:"current-password",label:r("patient.login.password"),value:t,onChange:i=>l(i.target.value),uiStyle:"default",...o&&{state:"error",message:r("patient.login.wrong_password")},...n&&{state:"error",message:r("common.feedback.required_field")},...a&&!o&&{state:"error",message:s}})]})},P=({rememberMe:t,setRememberMe:o,onForgotPasswordClick:n,forgotPasswordUrl:a})=>{const{t:s}=w();return e.jsxs("div",{className:"flex w-full justify-between mt-[4px]",children:[e.jsx("div",{className:"h-[24px] mt-[4px]",children:e.jsx(H,{id:"rememberMe",name:"rememberMe",label:s("patient.login.remember_username"),onChange:()=>o(!t),checked:t})}),e.jsx("div",{className:"mr-[-8px]",children:e.jsx(B,{uiStyle:"link-primary",href:a,size:"small",onClick:n,children:s("patient.login.password_reset")})})]})},R=({isFormSubmitted:t})=>{const{t:o}=w();return e.jsx("div",{className:"flex flex-col mt-[24px]",children:e.jsx(B,{type:"submit",disabled:t,loadable:{loading:t},children:o("common.actions.continue")})})},W=({prefilledUsername:t,password:o,isPasswordWrongError:n,isPasswordRequiredError:a,isKeycloakError:s,message:l,onPasswordChange:c,inputPasswordRef:d,rememberMe:r,setRememberMe:i,onForgotPasswordClick:m,forgotPasswordUrl:u,isFormSubmitted:x})=>{const{t:f}=w();return e.jsxs("div",{id:"desktop-container",children:[e.jsx(C,{font:"Title/L/Bold",level:"h1",children:f("patient.login.title")}),e.jsx(E,{font:"Body/S/Regular",color:"shared/text/bodyText/weaker",children:t}),e.jsx(N,{password:o,isPasswordWrongError:n,isPasswordRequiredError:a,isKeycloakError:s,message:l,onPasswordChange:c,inputPasswordRef:d,prefilledUsername:t}),e.jsx(P,{rememberMe:r,setRememberMe:i,onForgotPasswordClick:m,forgotPasswordUrl:u}),e.jsx(R,{isFormSubmitted:x})]})},X=({prefilledUsername:t,password:o,isPasswordWrongError:n,isPasswordRequiredError:a,isKeycloakError:s,message:l,onPasswordChange:c,inputPasswordRef:d,rememberMe:r,setRememberMe:i,onForgotPasswordClick:m,forgotPasswordUrl:u,isFormSubmitted:x})=>{const{t:f}=w();return e.jsxs("div",{className:"flex flex-col justify-between p-[16px]",children:[e.jsx(V,{name:"lock"}),e.jsx("div",{className:"mt-[16px]",children:e.jsx(C,{font:"Title/L/Bold",level:"h1",children:f("patient.login.title")})}),e.jsx(E,{font:"Body/S/Regular",color:"shared/text/bodyText/weaker",children:t}),e.jsx(N,{password:o,isPasswordWrongError:n,isPasswordRequiredError:a,isKeycloakError:s,message:l,onPasswordChange:c,inputPasswordRef:d,prefilledUsername:t}),e.jsx(P,{rememberMe:r,setRememberMe:i,onForgotPasswordClick:m,forgotPasswordUrl:u}),e.jsx(R,{isFormSubmitted:x})]})},Y=({isOnMobile:t,prefilledUsername:o,password:n,isPasswordWrongError:a,isPasswordRequiredError:s,isKeycloakError:l,message:c,onPasswordChange:d,inputPasswordRef:r,rememberMe:i,setRememberMe:m,onForgotPasswordClick:u,forgotPasswordUrl:x,isFormSubmitted:f,onBack:b,handleSubmit:j,url:_})=>e.jsx("form",{onSubmit:g=>{(async()=>await j(g))()},action:_.loginAction,method:"post",children:t?e.jsx(X,{prefilledUsername:o,password:n,isPasswordWrongError:a,isPasswordRequiredError:s,isKeycloakError:l,message:c,onPasswordChange:d,inputPasswordRef:r,rememberMe:i,setRememberMe:m,onForgotPasswordClick:u,forgotPasswordUrl:x,isFormSubmitted:f}):e.jsx(W,{prefilledUsername:o,password:n,isPasswordWrongError:a,isPasswordRequiredError:s,isKeycloakError:l,message:c,onPasswordChange:d,inputPasswordRef:r,rememberMe:i,setRememberMe:m,onForgotPasswordClick:u,forgotPasswordUrl:x,isFormSubmitted:f,onBack:b})}),ne=t=>{const{backUrl:o,client:n,isError:a,message:s,prefilledUsername:l,url:c,productEventContext:d}=t.context,{isOnMobile:r}=t,i=G(),{t:m}=w(),[u,x]=p.useState(""),[f,b]=p.useState(!0),[j,_]=p.useState(a),[g,y]=p.useState(!1),[S,T]=p.useState((s==null?void 0:s.content)!==void 0),[U,L]=p.useState(!1),k=p.useRef(null);p.useEffect(()=>{v({schema:"patient",name:"patient_authentication__login_password_page__viewed",details:{context:d}}),document.title=m("patient.login.html_page_title")},[]),p.useEffect(()=>{var h;(j||g)&&((h=k.current)==null||h.focus())},[j,g]);const M=async h=>{if(h.preventDefault(),!u){y(!0);return}L(!0);const O=h.target,$=await K.prehashPassword(u),q=document.getElementById("password");q.value=$,O.submit(),v({schema:"patient",name:"patient_authentication__login_password_button__clicked"})},F=()=>{v({schema:"patient",name:"patient_authentication__login_forgotten_password_button__clicked"})},z=`${decodeURIComponent(n.baseUrl)}/account/passwords/new?from_idp=1`,A=h=>{j&&_(!1),S&&T(!1),g&&y(!1),x(h)},I=()=>{window.location.href=decodeURIComponent(o)};return e.jsx(Q,{onBack:I,title:m("patient.login.page_title"),clientBaseUrl:decodeURIComponent(n.baseUrl),proInfoUrl:`https://info.doctolib.${i}/`,helpCenterUrl:`https://doctolibpatient.zendesk.com/hc/${i}?source=help_button`,isOnMobile:t.isOnMobile,isErrorPage:!1,children:e.jsx(Y,{isOnMobile:r,prefilledUsername:l,password:u,isPasswordWrongError:j,isPasswordRequiredError:g,isKeycloakError:S,message:s==null?void 0:s.content,onPasswordChange:A,inputPasswordRef:k,rememberMe:f,setRememberMe:b,onForgotPasswordClick:F,forgotPasswordUrl:z,isFormSubmitted:U,onBack:I,handleSubmit:M,url:c})})};export{ne as default};
//# sourceMappingURL=Login-B1YeY9eF.js.map
